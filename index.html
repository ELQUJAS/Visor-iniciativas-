<!doctype html>
<html lang="en">
Â  Â  <head>
Â  Â  Â  Â  <meta charset="utf-8">
Â  Â  Â  Â  <meta http-equiv="X-UA-Compatible" content="IE=edge">
Â  Â  Â  Â  <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
Â  Â  Â  Â  <meta name="mobile-web-app-capable" content="yes">
Â  Â  Â  Â  <meta name="apple-mobile-web-app-capable" content="yes">
Â  Â  Â  Â  <link rel="stylesheet" href="css/leaflet.css">
Â  Â  Â  Â  <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
Â  Â  Â  Â  <link rel="stylesheet" href="css/qgis2web.css">
Â  Â  Â  Â  <link rel="stylesheet" href="css/fontawesome-all.min.css">
Â  Â  Â  Â  <link rel="stylesheet" href="css/leaflet.photon.css">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <style>
Â  Â  Â  Â  /* ESTILO CRUCIAL PARA QUE EL MAPA OCUPE TODA LA PANTALLA */
Â  Â  Â  Â  html, body, #map {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Estilos para los puntos de color en la leyenda */
Â  Â  Â  Â  .legend-point {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  width: 10px;Â 
Â  Â  Â  Â  Â  Â  height: 10px;
Â  Â  Â  Â  Â  Â  margin-right: 5px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;Â 
Â  Â  Â  Â  Â  Â  border: 1px solid #333;Â 
Â  Â  Â  Â  Â  Â  vertical-align: middle;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* DefiniciÃ³n de colores por categorÃ­a */
Â  Â  Â  Â  .green { background-color: rgba(84,205,66,1.0); }Â 
Â  Â  Â  Â  .white { background-color: rgba(255,255,255,1.0); }Â 
Â  Â  Â  Â  .yellow { background-color: rgba(255,241,0,1.0); }Â 
Â  Â  Â  Â  .blue { background-color: rgba(0,240,255,1.0); }Â 
Â  Â  Â  Â  .red { background-color: rgba(255,0,24,1.0); }Â 
Â  Â  Â  Â  .magenta { background-color: rgba(255,0,205,1.0); }Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* [CSS para Leyendas] */
Â  Â  Â  Â  .leaflet-bottom { position: fixed; }
Â  Â  Â  Â  .leaflet-bottom.leaflet-right .leaflet-control-layers.leaflet-control-layers-tree { background-color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(0, 0, 0, 0.2); }
Â  Â  Â  Â  .leaflet-bottom.leaflet-right .leaflet-control-layers-toggle { display: none !important; }
Â  Â  Â  Â  .leaflet-bottom.leaflet-right .leaflet-control-layers-expanded { padding: 6px; padding-top: 10px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* [CSS para el Visor de Coordenadas nativo] */
Â  Â  Â  Â  .leaflet-control-mouseposition {
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.8);Â 
Â  Â  Â  Â  Â  Â  padding: 5px 8px;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(0,0,0,0.2);
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;Â 
Â  Â  Â  Â  Â  Â  margin-left: 10px;Â Â 
Â  Â  Â  Â  Â  Â  pointer-events: auto;Â 
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  </style>
Â  Â  Â  Â  <title></title>
Â  Â  </head>
Â  Â  <body>
Â  Â  Â  Â  <div id="map">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <script src="js/qgis2web_expressions.js"></script>
Â  Â  Â  Â  <script src="js/leaflet.js"></script>
Â  Â  Â  Â  <script src="js/L.Control.Layers.Tree.min.js"></script>
Â  Â  Â  Â  <script src="js/leaflet.rotatedMarker.js"></script>
Â  Â  Â  Â  <script src="js/leaflet.pattern.js"></script>
Â  Â  Â  Â  <script src="js/leaflet-hash.js"></script>
Â  Â  Â  Â  <script src="js/Autolinker.min.js"></script>
Â  Â  Â  Â  <script src="js/rbush.min.js"></script>
Â  Â  Â  Â  <script src="js/labelgun.min.js"></script>
Â  Â  Â  Â  <script src="js/labels.js"></script>
Â  Â  Â  Â  <script src="js/leaflet.photon.js"></script>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <script src="data/temp5_2.js"></script>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <script>
Â  Â  Â  Â  Â  Â  // SOLUCIÃ“N DE VISUALIZACIÃ“N: InicializaciÃ³n de Leaflet dentro de window.onload
Â  Â  Â  Â  Â  Â  window.onload = function() {

Â  Â  Â  Â  Â  Â  Â  Â  // [Funciones de Highlight y Map Setup]
Â  Â  Â  Â  Â  Â  Â  Â  var highlightLayer;
Â  Â  Â  Â  Â  Â  Â  Â  function highlightFeature(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  highlightLayer = e.target;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  highlightLayer.setStyle({ color: '#ffff00', });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  highlightLayer.setStyle({ fillColor: '#ffff00', fillOpacity: 1 });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // InicializaciÃ³n del Mapa
Â  Â  Â  Â  Â  Â  Â  Â  var map = L.map('map', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  zoomControl:false, maxZoom:28, minZoom:1
Â  Â  Â  Â  Â  Â  Â  Â  }).fitBounds([[-35.654545548961444,-71.58858503288076],[-35.13259820098246,-70.38275026311662]]);

Â  Â  Â  Â  Â  Â  Â  Â  var hash = new L.Hash(map);
Â  Â  Â  Â  Â  Â  Â  Â  map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
Â  Â  Â  Â  Â  Â  Â  Â  var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // [Funciones auxiliares para Pop-up]
Â  Â  Â  Â  Â  Â  Â  Â  function removeEmptyRowsFromPopupContent(content, feature) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â var tempDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â tempDiv.innerHTML = content;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â var rows = tempDiv.querySelectorAll('tr');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â for (var i = 0; i < rows.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â var td = rows[i].querySelector('td.visible-with-data');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â var key = td ? td.id : '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â rows[i].parentNode.removeChild(rows[i]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return tempDiv.innerHTML;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  function addClassToPopupIfMedia(content, popup) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var tempDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tempDiv.innerHTML = content;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var imgTd = tempDiv.querySelector('td img');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (imgTd) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var src = imgTd.getAttribute('src');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (/\.(jpg|jpeg|png|gif|bmp|webp|avif)$/i.test(src)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  popup._contentNode.classList.add('media');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(function() { popup.update(); }, 10);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (/\.(mp3|wav|ogg|aac)$/i.test(src)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var audio = document.createElement('audio');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audio.controls = true; audio.src = src;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imgTd.parentNode.replaceChild(audio, imgTd);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  popup._contentNode.classList.add('media');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(function() { popup.setContent(tempDiv.innerHTML); popup.update(); }, 10);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (/\.(mp4|webm|ogg|mov)$/i.test(src)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var video = document.createElement('video');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  video.controls = true; video.src = src;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  video.style.width = "400px"; video.style.height = "300px";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  video.style.maxHeight = "60vh"; video.style.maxWidth = "60vw";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imgTd.parentNode.replaceChild(video, imgTd);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  popup._contentNode.classList.add('media');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  video.addEventListener('loadedmetadata', function() { popup.update(); });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(function() { popup.setContent(tempDiv.innerHTML); popup.update(); }, 10);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  popup._contentNode.classList.remove('media');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  popup._contentNode.classList.remove('media');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  var zoomControl = L.control.zoom({ position: 'topleft' }).addTo(map);
Â  Â  Â  Â  Â  Â  Â  Â  var bounds_group = new L.featureGroup([]);
Â  Â  Â  Â  Â  Â  Â  Â  function setBounds() { }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Capas Base
Â  Â  Â  Â  Â  Â  Â  Â  map.createPane('pane_OpenStreetMap_0');
Â  Â  Â  Â  Â  Â  Â  Â  map.getPane('pane_OpenStreetMap_0').style.zIndex = 400;
Â  Â  Â  Â  Â  Â  Â  Â  var layer_OpenStreetMap_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pane: 'pane_OpenStreetMap_0', opacity: 1.0, attribution: '', minZoom: 1, maxZoom: 28, minNativeZoom: 0, maxNativeZoom: 19
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  layer_OpenStreetMap_0;
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_OpenStreetMap_0);
Â  Â  Â  Â  Â  Â  Â  Â  map.createPane('pane_GoogleSatellite_1');
Â  Â  Â  Â  Â  Â  Â  Â  map.getPane('pane_GoogleSatellite_1').style.zIndex = 401;
Â  Â  Â  Â  Â  Â  Â  Â  var layer_GoogleSatellite_1 = L.tileLayer('http://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pane: 'pane_GoogleSatellite_1', opacity: 1.0, attribution: '', minZoom: 1, maxZoom: 28, minNativeZoom: 0, maxNativeZoom: 22
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  layer_GoogleSatellite_1;
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_GoogleSatellite_1);

Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  Â  Â  Â  Â  // FUNCIÃ“N POP-UP (APLICANDO LA MODIFICACIÃ“N DE ID 20)
Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  Â  Â  Â  Â  function pop_temp5_2(feature, layer) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  layer.on({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mouseout: function(e) { for (var i in e.target._eventParents) { if (typeof e.target._eventParents[i].resetStyle === 'function') { e.target._eventParents[i].resetStyle(e.target); } } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mouseover: highlightFeature,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var descripcionTexto;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var categoria = feature.properties['Categorias'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var academicos = feature.properties['Academicos'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ğŸ”‘ LECTURA DEL ID TEMPORAL INYECTADO
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var puntoID = feature.properties['__temp_id'];Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ğŸ…°ï¸ LÃ“GICA DE EDICIÃ“N INDIVIDUAL (PRIORIDAD AL ID)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (puntoID === 5) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'DescripciÃ³n especial para el punto 5: Â¡Este es un hito importante!';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // MODIFICACIÃ“N APLICADA: ID 20 A BOSQUE NATIVO ESPINOSO
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (puntoID === 20) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = '2021 al 2022. Parametros ocupacion, abundancia relativa, patrones de actividad y densidad sin id individual.(Bosque Nativo Espinoso)';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (puntoID === 12) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'a. Ãreas agrÃ­colas<br>b. Paisajes agrÃ­colas<br>c. ParÃ¡metros de ocupaciÃ³n<br><br>**PAPERS ASOCIADOS:**<br><a href="https://doi.org/10.1111/1365-2664.13072" target="_blank">https://doi.org/10.1111/1365-2664.13072</a><br><a href="https://doi.org/10.1111/1365-2664.14026" target="_blank">https://doi.org/10.1111/1365-2664.14026</a><br><a href="https://doi.org/10.1093/jmammal/gyab074" target="_blank">https://doi.org/10.1093/jmammal/gyab074</a>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (puntoID === 14) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'a. Ãrea protegida. Parque Nacional Villarrica<br>b. Bosque templado andino<br>c. parÃ¡metros descriptivos<br><br>Parte del monitoreo escolar de fauna silvestre. Detalles del monitoreo en el libro <a href="https://www.dropbox.com/scl/fo/9svmtrtr4lwfrmrgc33si/ALNzadgKfF77oe9d2qGA_8k?rlkey=csfeehjlq2jx3v2dyi6tvdowj&dl=0" target="_blank">https://www.dropbox.com/scl/fo/9svmtrtr4lwfrmrgc33si/ALNzadgKfF77oe9d2qGA_8k?rlkey=csfeehjlq2jx3v2dyi6tvdowj&dl=0</a> y descripciÃ³n del proyecto <a href="https://www.youtube.com/watch?v=YPsbILPuxJU" target="_blank">https://www.youtube.com/watch?v=YPsbILPuxJU</a>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (puntoID === 45) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'a. FundaciÃ³n para la ConservaciÃ³n Ambiental y ZoolÃ³gica<br><br>Apoyo a las iniciativas de conservaciÃ³n de un fragmento continuo de 300-400 hectÃ¡reas. Monitoreo con CÃ¡maras trampa desde el 2016. Registros en Wildlife Insights.<br><br>Apoyo al monitoreo y y protocolos de manejo para la conservaciÃ³n.';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ğŸ…±ï¸ LÃ“GICA DE EDICIÃ“N POR CATEGORÃA Y ACADÃ‰MICO (REGLAS EXISTENTES)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Esta regla se mantiene como fallback para otros puntos de Diego Ramirez que no sean el ID 20.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (categoria === 'Monitoreo o muestreo de la especie' && academicos === 'Diego Ramirez') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = '2021 al 2022. Parametros ocupacion, abundancia relativa, patrones de actividad y densidad sin id individual.(Monocultivo Forestal)';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ... (otras reglas por categorÃ­a/acadÃ©mico)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (categoria === 'Monitoreo o muestreo de la especie' && academicos === 'Beltrami') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'Sub-temas: ParÃ¡metros i, ii, iii y iv. Se estÃ¡ coordinando y definiendo realizar una actualizaciÃ³n de parametros poblacionales en Reserva de la BiÃ³sfera La Campana-PeÃ±uelas, comenzando por esta zona de Casablanca';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (categoria === 'ReducciÃ³n o mitigaciÃ³n de amenazas' && academicos === 'Jose Caro') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'Operativo Veterinario de mascotas<br><br>c. VacunaciÃ³n:<br><br>A partir de los fondos disponibles de la SebsecretarÃ­a de Desarrollo Regional (SUBDERE) para la vacunaciÃ³n y esterilizaciÃ³n de mascotas, Guardaparques del Parque Nacional Radal Siete Tazas gestionan la posibilidad de otorgar a la localidad de Radal, como una zona prioritaria para implementar este programa en la comunda de Molina. Para ello, Guardaparques gestionan con la DirecciÃ³n de Desarrollo Comunal de Molina (DIDECO) el operativo veterinario en Radal y colaboran en la coordinaciÃ³n den terreno a travÃ©s de la Junta de vecinos. En total se abordaron mÃ¡s de 30 mascotas, aunque en su gran mayorÃ­a fueron perros, teniendo muchos problemas para la vacunaciÃ³n de gatos debido a la dificultad de sus dueÃ±os para manipularlos. Fecha: 2019.';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (categoria === 'Iniciativas de EducaciÃ³n y difusiÃ³n' && academicos === 'Jose Caro') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'Taller "Protectores de la GÃ¼iÃ±a"-Escuela Radal<br><br>b. EducaciÃ³n escolar no-formal: Taller desarrollado en la Escuela El Radal, con 10 niÃ±as/os de la comunidad entre 4 y 14 aÃ±os, para que conocieran y valorizaran a uno de los objetos de conservaciÃ³n del parque nacional, como es la GÃ¼iÃ±a. La actividad estuvo organizada por 3 personas pertenecientes al Plan de EducaciÃ³n Ambiental de la GÃ¼iÃ±a, y la colaboraciÃ³n y participaciÃ³n de Guardaparques del Parque Nacional Radal Siete Tazas. Fecha: 2018.';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (categoria === 'Monitoreo o muestreo de la especie' && academicos === 'Jose Caro') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = 'a. Parque Nacional Radal Siete Tazas<br>b. Bosque esclerÃ³filo (de montaÃ±a) y Bosque caducifolio<br>c. ParÃ¡metros de ocupaciÃ³n ("NaÃ¯ve", sin correcciÃ³n por tasa de detecciÃ³n u otras variables) Fecha: 2019-2023. ImplementaciÃ³n del monitoreo con cÃ¡maras trampas en el Parque Nacional y el anÃ¡lisis de los resultados de ocupaciÃ³n simple, desde el aÃ±o 2019 al 2023. DespuÃ©s siguieron con el monitoreo los colegas Guardaparques del parque nacional.';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // 6. VALOR POR DEFECTO
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionTexto = feature.properties['Descrip_'] !== null ? autolinker.link(String(feature.properties['Descrip_']).replace(/'/g, '\'').toLocaleString()) : '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var popupContent = '<table>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th scope="row">ID del Punto:</th>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>' + (feature.properties['__temp_id'] !== null ? autolinker.link(String(feature.properties['__temp_id']).replace(/'/g, '\'').toLocaleString()) : 'N/A') + '</td>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th scope="row">CategorÃ­a:</th>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>' + (feature.properties['Categorias'] !== null ? autolinker.link(String(feature.properties['Categorias']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th scope="row">DescripciÃ³n:</th>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>' + descripcionTexto + '</td>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th scope="row">AcadÃ©micos:</th>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>' + (feature.properties['Academicos'] !== null ? autolinker.link(String(feature.properties['Academicos']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var content = removeEmptyRowsFromPopupContent(popupContent, feature);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  layer.on('popupopen', function(e) { addClassToPopupIfMedia(content, e.popup); });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  layer.bindPopup(content, { maxHeight: 400, minWidth: 350, maxWidth: 500 });Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // [Funciones de Estilo Individual y CreaciÃ³n de Capas]
Â  Â  Â  Â  Â  Â  Â  Â  function style_ApoyoConservacion(feature) { return { pane: 'pane_temp5_2', radius: 8.0, opacity: 1, color: 'rgba(35,35,35,1.0)', dashArray: '', lineCap: 'butt', lineJoin: 'miter', weight: 1, fill: true, fillOpacity: 1, fillColor: 'rgba(84,205,66,1.0)', interactive: true, } }
Â  Â  Â  Â  Â  Â  Â  Â  function style_ApoyoPrivadas(feature) { return { pane: 'pane_temp5_2', radius: 8.0, opacity: 1, color: 'rgba(35,35,35,1.0)', dashArray: '', lineCap: 'butt', lineJoin: 'miter', weight: 1, fill: true, fillOpacity: 1, fillColor: 'rgba(255,255,255,1.0)', interactive: true, } }
Â  Â  Â  Â  Â  Â  Â  Â  function style_EducacionDifusion(feature) { return { pane: 'pane_temp5_2', radius: 8.0, opacity: 1, color: 'rgba(35,35,35,1.0)', dashArray: '', lineCap: 'butt', lineJoin: 'miter', weight: 1, fill: true, fillOpacity: 1, fillColor: 'rgba(255,241,0,1.0)', interactive: true, } }
Â  Â  Â  Â  Â  Â  Â  Â  function style_MonitoreoMuestreo(feature) { return { pane: 'pane_temp5_2', radius: 8.0, opacity: 1, color: 'rgba(35,35,35,1.0)', dashArray: '', lineCap: 'butt', lineJoin: 'miter', weight: 1, fill: true, fillOpacity: 1, fillColor: 'rgba(0,240,255,1.0)', interactive: true, } }
Â  Â  Â  Â  Â  Â  Â  Â  function style_ReduccionMitigacion(feature) { return { pane: 'pane_temp5_2', radius: 8.0, opacity: 1, color: 'rgba(35,35,35,1.0)', dashArray: '', lineCap: 'butt', lineJoin: 'miter', weight: 1, fill: true, fillOpacity: 1, fillColor: 'rgba(255,0,24,1.0)', interactive: true, } }
Â  Â  Â  Â  Â  Â  Â  Â  function style_RelevamientoGuignaHumanos(feature) { return { pane: 'pane_temp5_2', radius: 8.0, opacity: 1, color: 'rgba(35,35,35,1.0)', dashArray: '', lineCap: 'butt', lineJoin: 'miter', weight: 1, fill: true, fillOpacity: 1, fillColor: 'rgba(255,0,205,1.0)', interactive: true, } }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  Â  Â  Â  Â  // INYECTAR ID ÃšNICO Y CREACIÃ“N DE CAPAS
Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================

Â  Â  Â  Â  Â  Â  Â  Â  // Este bloque asigna un ID secuencial a cada punto (1, 2, 3, etc.)
Â  Â  Â  Â  Â  Â  Â  Â  for (i = 0; i < json_temp5_2.features.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  json_temp5_2.features[i].properties['__temp_id'] = i + 1;Â 
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function filterFeature(category) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return function(feature) { return feature.properties.Categorias === category; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  map.createPane('pane_temp5_2');
Â  Â  Â  Â  Â  Â  Â  Â  map.getPane('pane_temp5_2').style.zIndex = 402;
Â  Â  Â  Â  Â  Â  Â  Â  map.getPane('pane_temp5_2').style['mix-blend-mode'] = 'normal';

Â  Â  Â  Â  Â  Â  Â  Â  // CreaciÃ³n de capas usando los filtros y el GeoJSON modificado
Â  Â  Â  Â  Â  Â  Â  Â  var layer_ApoyoConservacion = L.geoJson(json_temp5_2, { attribution: '', interactive: true, dataVar: 'json_temp5_2', layerName: 'layer_ApoyoConservacion', pane: 'pane_temp5_2', onEachFeature: pop_temp5_2, filter: filterFeature('Apoyo Iniciativas de ConservaciÃ³n'), pointToLayer: function (feature, latlng) { return L.circleMarker(latlng, style_ApoyoConservacion(feature)); }, });
Â  Â  Â  Â  Â  Â  Â  Â  bounds_group.addLayer(layer_ApoyoConservacion);
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_ApoyoConservacion);

Â  Â  Â  Â  Â  Â  Â  Â  var layer_ApoyoPrivadas = L.geoJson(json_temp5_2, { attribution: '', interactive: true, dataVar: 'json_temp5_2', layerName: 'layer_ApoyoPrivadas', pane: 'pane_temp5_2', onEachFeature: pop_temp5_2, filter: filterFeature('Apoyo iniciativas privadas'), pointToLayer: function (feature, latlng) { return L.circleMarker(latlng, style_ApoyoPrivadas(feature)); }, });
Â  Â  Â  Â  Â  Â  Â  Â  bounds_group.addLayer(layer_ApoyoPrivadas);
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_ApoyoPrivadas);

Â  Â  Â  Â  Â  Â  Â  Â  var layer_EducacionDifusion = L.geoJson(json_temp5_2, { attribution: '', interactive: true, dataVar: 'json_temp5_2', layerName: 'layer_EducacionDifusion', pane: 'pane_temp5_2', onEachFeature: pop_temp5_2, filter: filterFeature('Iniciativas de EducaciÃ³n y difusiÃ³n'), pointToLayer: function (feature, latlng) { return L.circleMarker(latlng, style_EducacionDifusion(feature)); }, });
Â  Â  Â  Â  Â  Â  Â  Â  bounds_group.addLayer(layer_EducacionDifusion);
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_EducacionDifusion);

Â  Â  Â  Â  Â  Â  Â  Â  var layer_MonitoreoMuestreo = L.geoJson(json_temp5_2, { attribution: '', interactive: true, dataVar: 'json_temp5_2', layerName: 'layer_MonitoreoMuestreo', pane: 'pane_temp5_2', onEachFeature: pop_temp5_2, filter: filterFeature('Monitoreo o muestreo de la especie'), pointToLayer: function (feature, latlng) { return L.circleMarker(latlng, style_MonitoreoMuestreo(feature)); }, });
Â  Â  Â  Â  Â  Â  Â  Â  bounds_group.addLayer(layer_MonitoreoMuestreo);
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_MonitoreoMuestreo);

Â  Â  Â  Â  Â  Â  Â  Â  var layer_ReduccionMitigacion = L.geoJson(json_temp5_2, { attribution: '', interactive: true, dataVar: 'json_temp5_2', layerName: 'layer_ReduccionMitigacion', pane: 'pane_temp5_2', onEachFeature: pop_temp5_2, filter: filterFeature('ReducciÃ³n o mitigaciÃ³n de amenazas'), pointToLayer: function (feature, latlng) { return L.circleMarker(latlng, style_ReduccionMitigacion(feature)); }, });
Â  Â  Â  Â  Â  Â  Â  Â  bounds_group.addLayer(layer_ReduccionMitigacion);
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_ReduccionMitigacion);

Â  Â  Â  Â  Â  Â  Â  Â  var layer_RelevamientoGuignaHumanos = L.geoJson(json_temp5_2, { attribution: '', interactive: true, dataVar: 'json_temp5_2', layerName: 'layer_RelevamientoGuignaHumanos', pane: 'pane_temp5_2', onEachFeature: pop_temp5_2, filter: filterFeature('Relevamiento de informacion sobre relacion guigna-humanos'), pointToLayer: function (feature, latlng) { return L.circleMarker(latlng, style_RelevamientoGuignaHumanos(feature)); }, });
Â  Â  Â  Â  Â  Â  Â  Â  bounds_group.addLayer(layer_RelevamientoGuignaHumanos);
Â  Â  Â  Â  Â  Â  Â  Â  map.addLayer(layer_RelevamientoGuignaHumanos);

Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  Â  Â  Â  Â  // LEYENDAS
Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================

Â  Â  Â  Â  Â  Â  Â  Â  var overlaysTree_iniciativas = [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'ğŸ¾ **CategorÃ­as**',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectAllCheckbox: true,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  children: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: '<span class="legend-point green"></span> Apoyo a Iniciativas de ConservaciÃ³n', layer: layer_ApoyoConservacion},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: '<span class="legend-point white"></span> Apoyo a Iniciativas Privadas', layer: layer_ApoyoPrivadas},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: '<span class="legend-point yellow"></span> EducaciÃ³n y DifusiÃ³n', layer: layer_EducacionDifusion},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: '<span class="legend-point blue"></span> Monitoreo o Muestreo de la Especie', layer: layer_MonitoreoMuestreo},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: '<span class="legend-point red"></span> ReducciÃ³n y MitigaciÃ³n de Amenazas', layer: layer_ReduccionMitigacion},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: '<span class="legend-point magenta"></span> RelaciÃ³n GÃ¼iÃ±a-Humanos (Relevamiento)', layer: layer_RelevamientoGuignaHumanos},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  var overlaysTree_mapasbase = [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'ğŸŒ **Mapas Base**',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  children: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: "Google Satellite", layer: layer_GoogleSatellite_1},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {label: "OpenStreetMap", layer: layer_OpenStreetMap_0},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  ];

Â  Â  Â  Â  Â  Â  Â  Â  var layMapasBase = L.control.layers.tree(null, overlaysTree_mapasbase, { collapsed: true, position: 'topright' });
Â  Â  Â  Â  Â  Â  Â  Â  layMapasBase.addTo(map);
Â  Â  Â  Â  Â  Â  Â  Â  var layIniciativas = L.control.layers.tree(null, overlaysTree_iniciativas, { collapsed: false, position: 'bottomright'});
Â  Â  Â  Â  Â  Â  Â  Â  layIniciativas.addTo(map);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  Â  Â  Â  Â  // VISOR DE COORDENADAS (CORREGIDO)
Â  Â  Â  Â  Â  Â  Â  Â  // =========================================================================

Â  Â  Â  Â  Â  Â  Â  Â  var MousePosition = L.Control.extend({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onAdd: function(map) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this._div = L.DomUtil.create('div', 'leaflet-control-mouseposition');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this._div.innerHTML = 'Mueva el ratÃ³n sobre el mapa';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  map.on('mousemove', this._update, this);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return this._div;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onRemove: function(map) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  map.off('mousemove', this._update, this);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _update: function(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var lat = e.latlng.lat.toFixed(4);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var lon = e.latlng.lng.toFixed(4);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this._div.innerHTML = 'Lat: ' + lat + ' | Lon: ' + lon;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // Asegura que el visor de coordenadas se aÃ±ade al mapa
Â  Â  Â  Â  Â  Â  Â  Â  new MousePosition({position: 'bottomleft'}).addTo(map);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  setBounds();
Â  Â  Â  Â  Â  Â  }; // Cierre de window.onload
Â  Â  Â  Â  </script>
Â  Â  Â  Â Â 
Â  Â  </body>
</html>
